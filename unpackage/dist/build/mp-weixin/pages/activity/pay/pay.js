(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/pay/pay"],{"0d17":function(t,e,a){"use strict";var i=a("956a"),n=a.n(i);n.a},"7bcb":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"88fc":function(t,e,a){"use strict";(function(t){a("b5e5"),a("921b");i(a("66fd"));var e=i(a("f60a"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"8d36":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{isMen:!1,isWomen:!1,payType:-1,activityId:"",actDetail:"",payMoney:0,mNumber:0,gNumber:0,clubId:null,orderNo:null}},onLoad:function(e){var a=this;console.log(e),this.activityId=e.actId,this.$http.get({url:"/v1/rest/home/signUpDetails",data:{activitiesId:e.actId,userId:t.getStorageSync("userInfo").userId}}).then(function(t){console.log(t),200==t.status&&(a.actDetail=t.data,a.clubId=t.data.clubId)})},onPullDownRefresh:function(){var e=this;console.log("refresh"),this.$http.get({url:"/v1/rest/home/signUpDetails",data:{activitiesId:this.activityId,userId:t.getStorageSync("userInfo").userId}}).then(function(a){console.log(a),t.stopPullDownRefresh(),200==a.status&&(e.actDetail=a.data,e.clubId=a.data.clubId)})},methods:{choiceSex1:function(){this.isMen=!this.isMen,this.isWomen=!1,this.gNumber=0,this.mNumber=1},choiceSex2:function(){this.isWomen=!this.isWomen,this.isMen=!1,this.gNumber=1,this.mNumber=0},choicePay:function(t){switch(t){case 1:this.payType=0,this.isMen?this.payMoney=this.actDetail.moneyMan:this.payMoney=this.actDetail.moneyWomen;break;case 2:this.payType=1,this.payMoney=this.actDetail.temporaryMoney;break;case 3:this.payType=2,this.payMoney=this.actDetail.temporaryMoney;break;case 4:this.payType=3,this.payMoney=this.actDetail.walletPayMoney;break}},Recharge:function(){t.navigateTo({url:"/pages/userCenter/membershipFeeRecharge/membershipFeeRecharge?clubId"+this.clubId})},submit:function(){var e=this,a=this;if(this.isMen||this.isWomen)if(this.payType<0)t.showToast({title:"请选择支付方式！",duration:2e3,icon:"none"});else{var i={clubId:this.clubId,payType:this.payType,gNumber:this.gNumber,mNumber:this.mNumber,productId:this.activityId,totalPrice:this.payMoney,userId:t.getStorageSync("userInfo").userId};console.log(i),1===this.payType?this.$http.post({url:"/v1/rest/pay/payUpper",data:i}).then(function(i){console.log(i),200==i.statusCode?t.login({provider:"weixin",success:function(e){a.$http.get({url:"/v1/rest/login/updateOpenId",data:{code:e.code,userId:t.getStorageSync("userInfo").userId}}).then(function(t){console.log(t),a.submit()})}}):200==i.status&&(e.orderNo=i.data.orderNo,t.requestPayment({provider:"wxpay",timeStamp:i.data.timeStamp,nonceStr:i.data.nonceStr,package:i.data.package,signType:i.data.signType,paySign:i.data.paySign,success:function(e){console.log(e),a.$http.get({url:"/v1/rest/pay/wechatPayCallback",data:{type:"success",orderNo:a.orderNo,clubId:a.clubId}}).then(function(e){if(console.log(e),200==e.status){t.showToast({title:e.data.message,duration:1500,icon:"none"});var a=setTimeout(function(){t.redirectTo({url:"/pages/userCenter/myActivities/myActivities"}),clearTimeout(a)},1500)}})},fail:function(e){console.log(e),a.$http.get({url:"/v1/rest/pay/wechatPayCallback",data:{type:"fail",orderNo:a.orderNo,clubId:a.clubId}}).then(function(e){console.log(e),200==e.status&&t.showToast({title:e.data.message,duration:2e3,icon:"none"})})}}))}):this.$http.post({url:"/v1/rest/pay/payLower",data:i}).then(function(e){if(console.log(e),200==e.status){t.showToast({title:e.info,duration:2e3,icon:"none"});var a=setTimeout(function(){t.redirectTo({url:"/pages/userCenter/myActivities/myActivities"}),clearTimeout(a)},1500)}})}else t.showToast({title:"请选择性别！",duration:2e3,icon:"none"})}}};e.default=a}).call(this,a("543d")["default"])},"956a":function(t,e,a){},c4c2:function(t,e,a){"use strict";a.r(e);var i=a("8d36"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},f60a:function(t,e,a){"use strict";a.r(e);var i=a("7bcb"),n=a("c4c2");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("0d17");var s=a("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"260afa8a",null);e["default"]=c.exports}},[["88fc","common/runtime","common/vendor"]]]);